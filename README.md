## ğŸ“ é¡¹ç›®ä»‹ç»

> auto_scripts_tools ä¸ºä¸€é”®åº”ç”¨è„šæœ¬ï¼Œæˆ‘åœ¨è¿™é‡Œåˆ†äº«å¾ˆå¤šå¸¸ç”¨å…³äº Linuxã€Python ç­‰ä¸€é”®è„šæœ¬ï¼Œå¯¹äºç»å¸¸ç¹ççš„æ­å»ºå’Œé‡å¤é…ç½®å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™é‡Œçš„è„šæœ¬æ¥å®Œæˆï¼



### ğŸ“¦ ä»“åº“å†…å®¹

æœ¬ä»“åº“åŒ…å«ä»¥ä¸‹å‡ ç±»å®ç”¨è„šæœ¬ï¼š

#### é€šçŸ¥ç±»è„šæœ¬

- é’‰é’‰æœºå™¨äººï¼šå°è£…äº†é’‰é’‰æœºå™¨äººé€šçŸ¥(webhook)
- é‚®ä»¶ï¼šå°è£…äº† 163/126 é‚®ç®±(é‚®ä»¶åŠé™„ä»¶å‘é€)

#### å·¡æ£€ç±»è„šæœ¬(Server_Patrol_Script)

- æœåŠ¡å™¨å·¡æ£€è„šæœ¬ï¼š ç”¨äºæ—¥å¸¸ Linux æœåŠ¡å™¨å®šæ—¶è‡ªåŠ¨å·¡æ£€ï¼Œæ”¯æŒ Centos/Debian/Ubuntu ç³»ç»Ÿï¼Œå¯é‚®ä»¶é€šçŸ¥ï¼ˆéœ€è¦mailæ”¯æŒï¼‰

#### Git é…ç½®æ–‡ä»¶(Git_config)

- ä¸ªæ€§åŒ–é…ç½®æ–‡ä»¶ï¼š ä¸€äº›å¸¸ç”¨çš„ Git ç›¸å…³çš„é…ç½®æ–‡ä»¶ä¿å­˜

#### Linux é…ç½®æ–‡ä»¶(Linux_config)

- ä¸ªæ€§åŒ–é…ç½®æ–‡ä»¶ï¼šå¯ä»¥é…ç½®ä¸ªæ€§åŒ–çš„è®¾ç½®ï¼Œå¸¸ç”¨è®¾ç½®ï¼ŒåŒ…æ‹¬æ›´æ¢å›½å†…é•œåƒæºï¼ŒåŠ å¿«è½¯ä»¶ä¸‹è½½é€Ÿåº¦

#### Linux è‡ªåŠ¨åŒ–è„šæœ¬(Linux_auto_scripts)

nvidia-container-toolkit-installï¼šNVIDIA Container Toolkit å›½å†…é•œåƒæºå®‰è£…

Linux_auto_scripts ä¸­åŒ…å«ï¼š **Linux ç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬ã€Linux è½¯ä»¶ä¸€é”®å®‰è£…è„šæœ¬ã€Linux å¸¸ç”¨çš„ Shell è„šæœ¬**

- Linux ç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬ï¼šç”¨äºæ–°æœåŠ¡å™¨åˆå§‹åŒ–ï¼Œæ–°è£…ç³»ç»Ÿåˆå§‹åŒ–ï¼Œå®‰è£…è½¯ä»¶ç­‰
- Linux è½¯ä»¶ä¸€é”®å®‰è£…è„šæœ¬ï¼š ç”¨äº Linux ä¸‹å¸¸ç”¨è½¯ä»¶åŠå¤æ‚è½¯ä»¶å®‰è£…ç­‰
- Linux å¸¸ç”¨çš„ Shell è„šæœ¬ï¼šåŒ…å«äºå¸¸ç”¨çš„ Linux ä¸€é”®é…ç½®ï¼ˆç³»ç»ŸåŠè½¯ä»¶ï¼‰

#### ROS ç›¸å…³(Ros_Correlation)

- docker_ros_configï¼šdocker å®‰è£… ros ä¸­æ‰€ä¿®æ”¹çš„é…ç½®æ–‡ä»¶
- fishros_modï¼šé±¼é¦™ ros ä¸€é”®å®‰è£…è„šæœ¬ä¸­æ‰€æå–çš„ä¸€é”®å®‰è£… docker ros
- rosdistroï¼š æ¢æºï¼Œåœ¨å›½å†…ç¯å¢ƒå†…å¯ä»¥ä½¿ç”¨ rosdistro (rosdep update)
- docker rosï¼š å®‰è£… docker ros ç‰ˆï¼Œå¹¶ä¸”å¯ä»¥åˆå§‹åŒ– docker ros
- install ros: ä¸€é”®å®‰è£… rosï¼Œæ”¯æŒå®‰è£… ROS1 kinetic/melodic/noeticï¼ŒROS2 foxy/galactic/humble ç‰ˆæœ¬
- env init: ros ä¾èµ–ç¯å¢ƒåˆå§‹åŒ–å’Œå¸¸ç”¨ä¾èµ–åŠŸèƒ½åŒ…å®‰è£…

#### æ•°æ®åº“ç›¸å…³(Mysql)

+ mysql 8.0 å®‰è£…ï¼Œæ”¯æŒ Debian/Ubuntu ç³»ç»Ÿ
+ mysql æ•°æ®åº“å¤‡ä»½ï¼Œæ”¯æŒå¤‡ä»½å¤šä¸ªæ•°æ®åº“

#### Python è‡ªåŠ¨åŒ–è„šæœ¬(Python_Correlation)

- file_renamer.pyï¼šæ‰¹é‡é‡å‘½åå·¥å…·
- logger.pyï¼šå°è£…çš„ Python logging åº“
- mqtt_client.pyï¼šå°è£…çš„ MQTT å‘å¸ƒå’Œè®¢é˜…åº“
- ups_info.pyï¼šUPS ä¿¡æ¯è·å–å°è£…
- åŠªåŠ›æ›´æ–°ä¸­......

#### CAN(CANé€šä¿¡ç›¸å…³)

+ vcan_manager.shï¼šLinux è™šæ‹Ÿ CAN åŠŸèƒ½ç®€å•å°è£…ï¼Œé›†æˆåˆ›å»ºã€åˆ é™¤ã€æ£€æŸ¥ã€å‘é€ã€æ¥å—



## ç›®å½•è¯´æ˜

```bash
auto_scripts_tools â†’ main$ tree -L 1
.
â”œâ”€â”€ Adb_script                           // adb è„šæœ¬
â”œâ”€â”€ CAN                                  // CANé€šä¿¡ç›¸å…³
â”œâ”€â”€ Dingtalk_demo                        // å…³äºé’‰é’‰é€šçŸ¥çš„ä»£ç 
â”œâ”€â”€ Env                                  // ç¯å¢ƒä¾èµ–ç›¸å…³
â”œâ”€â”€ Git_config                           // git é…ç½®æ–‡ä»¶
â”œâ”€â”€ Linux_auto_scripts                   // Linux è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ Linux_config                         // Linux é…ç½®æ–‡ä»¶
â”œâ”€â”€ Mail_notice                          // é‚®ä»¶é€šçŸ¥ç›¸å…³ä»£ç 
â”œâ”€â”€ Mysql                                // MySQLæ•°æ®åº“ç›¸å…³
â”œâ”€â”€ Python_Correlation                   // Python ç›¸å…³æºç 
â”œâ”€â”€ README.md
â”œâ”€â”€ Ros_Correlation                      // Ros ç›¸å…³
â””â”€â”€ Server_Patrol_Script                 // æœåŠ¡å™¨å·¡æ£€è„šæœ¬

11 directories, 1 file
```



## ä½¿ç”¨è¯´æ˜

1. **ä½¿ç”¨ git clone è¿›è¡Œæ‹‰å–ï¼š**

   ```shell
   # è¯´æ˜ï¼šå¦‚Githubé“¾æ¥æ— æ³•æ‹‰å–å¯ä»¥ä½¿ç”¨Giteeé“¾æ¥è¿›è¡Œæ‹‰å–ï¼Œä¸¤ä¸ªä»“åº“åŒæ­¥æ›´æ–°
   # Github
   git clone https://github.com/toluckykoi/auto_scripts_tools.git
   
   # Gitee
   git clone https://gitee.com/toluckykoi/auto_scripts_tools.git
   
   ```

2. **ç¯å¢ƒä¾èµ–å®‰è£…ï¼š(åªæœ‰åœ¨è¿è¡Œ Python å†™çš„å·¥å…·æ—¶éœ€è¦å®‰è£…)**

   ```shell
   cd Env/python_pip_config/
   pip install -r dev_requirements.txt		# å…¨éƒ¨ä¾èµ–
   ```

3. **è¿›å…¥å¯¹åº”çš„åŠŸèƒ½ç›®å½•ä¸‹ï¼Œç„¶åè¿è¡Œå¯¹åº”è„šæœ¬å³å¯ï¼š**

   ä¾‹å¦‚è¿è¡ŒæœåŠ¡å™¨å·¡æ£€è„šæœ¬ï¼š

   ```shell
   cd Server_Patrol_Script/
   chmod +x server_patrol.sh
   sudo ./server_patrol.sh
   ```

   

## å…¶ä»–è¯´æ˜

> è¯¥ä»“åº“å†…çš„æ‰€æœ‰å·¥å…·éƒ½æ˜¯ä¸€æ¬¡æ€§çš„è¿è¡Œï¼Œå¦‚æœéœ€è¦ä¸€ç›´å¾ªç¯è¿è¡Œéœ€è¦å°†è„šæœ¬åŠ å…¥ç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡ä¸­å³å¯ï¼Œä½¿ç”¨â€œå®å¡”é¢æ¿â€æˆ–å…¶ä»–ç®¡ç†é¢æ¿çš„è‡ªè¡Œåœ¨é¢æ¿ä¸­æ‰¾è®¡åˆ’ä»»åŠ¡åŠŸèƒ½å»æ·»åŠ ï¼ï¼ˆåç»­åº”è¯¥ä¼šæ”¯æŒä¸€é”®æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼‰



#### linux_init_script.shï¼š

**`linux_init_script.sh` Linux ç³»ç»Ÿåˆå§‹åŒ–å·¥å…·ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š**

é»˜è®¤åˆå§‹åŒ–çš„ Linux ç³»ç»Ÿè´¦å·ä¸ºï¼š`toluckykoi`ï¼Œå¯†ç ï¼š`toluckykoi.123qwe`ï¼›åœ¨è¿è¡Œ`linux_init_script.sh`ä¸€é”®è„šæœ¬æ—¶**æ³¨æ„ä¿®æ”¹è´¦å·å¯†ç **ï¼Œä¿®æ”¹æ–¹å¼å¦‚ä¸‹ï¼š

**1ã€ä¸´æ—¶ä¿®æ”¹æ–¹å¼(ä½¿ç”¨ä¼ å‚æ–¹å¼)ï¼š**

ä¸´æ—¶ä¿®æ”¹è´¦å·å¯†ç æ˜¯ä½¿ç”¨ä¼ å‚çš„æ–¹å¼ï¼Œåœ¨è¿è¡Œè„šæœ¬æ—¶åœ¨åé¢ä¼ å…¥è´¦å·å¯†ç å³å¯ï¼Œä¾‹å¦‚ï¼š

```shell
sudo ./linux_init_script.sh ä½ çš„è´¦å· ä½ çš„å¯†ç 
# å‘½ä»¤ç¤ºä¾‹
sudo ./linux_init_script.sh user password
```

**2ã€ä¿®æ”¹é»˜è®¤è´¦å·å¯†ç æ–¹å¼ï¼š**

1ã€æ‰“å¼€`vim linux_init_script.sh`è„šæœ¬æ–‡ä»¶

2ã€æ›´æ”¹`default_username=toluckykoi`ä¸ºè‡ªå·±çš„ç”¨æˆ·åï¼Œå’Œæ›´æ”¹`default_password="toluckykoi.123qwe"`ä¸ºè‡ªå·±çš„å¯†ç 

3ã€:wq ä¿å­˜é€€å‡º



#### db_manager.pyï¼š

db_manager.py ä¸º mysql æ•°æ®åº“çš„å¤‡ä»½ä»¥åŠæ¢å¤å·¥å…·ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œæˆ–è€…ä½œä¸º lib çš„æ–¹å¼è¿›è¡Œè°ƒç”¨ï¼Œä½¿ç”¨è¿™ä¸ªï¼Œéœ€è¦å‡†å¤‡å¥½ä½ çš„`.env`æ–‡ä»¶ï¼

å‘½ä»¤è¡Œè°ƒç”¨æ–¹å¼ï¼š

```shell
# æ‰§è¡Œå¤‡ä»½
python db_manager.py backup --dbs you_database --user you_database_user

# æ‰§è¡Œæ¢å¤
python db_manager.py restore /path/to/database_file.sql --db you_recover_database --user you_database_user
```

Python è°ƒç”¨ï¼š

```python
# å¤‡ä»½æ•°æ®åº“
from db_manager import SecureDatabaseManager

# åˆå§‹åŒ–æ•°æ®åº“ç®¡ç†å™¨
manager = SecureDatabaseManager(
    db_name="my_database",
    user="my_user",
    password="my_password",  # å¯é€‰ï¼Œè‹¥å·²åœ¨.envæ–‡ä»¶ä¸­è®¾ç½®åˆ™å¯çœç•¥
    host="localhost",
    port=3306
)

# æ‰§è¡Œå¤‡ä»½
backup_path = manager.backup()
print(f"Backup saved to: {backup_path}")


# æ‰§è¡Œæ¢å¤
from db_manager import SecureDatabaseManager

# åˆå§‹åŒ–æ•°æ®åº“ç®¡ç†å™¨
manager = SecureDatabaseManager(
    db_name="my_database",
    user="my_user",
    password="my_password",  # å¯é€‰ï¼Œè‹¥å·²åœ¨.envæ–‡ä»¶ä¸­è®¾ç½®åˆ™å¯çœç•¥
    host="localhost",
    port=3306
)

# æ‰§è¡Œæ¢å¤
manager.restore("/path/to/your/backup_file.sql")
print("Database restored successfully.")
```



## æ›´æ–°

+ 2025-01-30 Initializing
